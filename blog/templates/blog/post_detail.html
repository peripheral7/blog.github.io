{% extends 'blog/base.html' %}

<!--Bring head_title block from file that extends base.html-->
<!-- if not, use title from base.html -->
{% block head_title %}
    {{ post.title }}
{% endblock %}

{% block main_area %}
<!-- Post content-->
<article class="my-4 px-4 post-content" id="post-area">
    <!-- Post header-->
    <header class="">
        <!-- Post title-->
        <h1 class="fw-bolder mb-4">
        <!-- categories -->
        {% if post.category %}
        <a class="text-decoration-none text-dark" href="{{ post.category.get_absolute_url}}">
        <span >{{ post.category }}</span></a>
        {% else %}
        <a href="/blog/category/no_category text-dark"><span >..</span></a>
        {% endif %}
           / {{ post.title}}
        </h1>

        <!-- Post meta content-->
        <div class="mt-2 text-muted d-flex justify-content-between">
            <div>{{ post.created_at}}&nbsp;</div>
            <div>
                by&nbsp;<a href="#" >{{post.author}}</a>
                {% if user.is_authenticated and user == post.author %}
                    <a class="btn  btn-sm mx-1 " href="/blog/update_post/{{post.pk}}/" role="button">
                        <i class="fas fa-pen"></i> Edit
                    </a>
                 {% endif %}
            </div>
        </div>
    </header>

    <!-- Preview image figure-->
    <figure class="my-5 d-flex justify-content-center">
        {% if post.head_image %}
        <img class="card-img-top detail-image" src="{{ post.head_image.url }}" alt="{{post}} head image" />
        {% endif %}
    </figure>

    <!-- Post content-->
    <section class="mb-5">
        <!-- safe prevents HTML escaping-->
        <!-- rendering HTML used tags into HTML entity -->
        <p class="post-content fs-5 mb-4">{{post.get_content_markdown | safe }}</p>

        <!-- <h2 class="fw-bolder mb-4 mt-5">I have odd cosmic thoughts every day</h2> -->
    </section>

    <section class="my-3 d-flex justify-content-end">
        {% if post.file_upload %}
        <a class="btn btn-outline-dark" href="{{ post.file_upload.url }}" role="button" download>
            {% if post.get_file_ext == 'csv' %}
            <i class="fas fa-file-csv"></i>
            {% elif post.get_file_ext == 'xlsx' or post.get_file_ext == 'xls'%}
                <i class="fas fa-file-excel"></i>
            {% elif post.get_file_ext == 'docx' or post.get_file_ext == 'doc'%}
                <i class="fas fa-file-word"></i>
            {% else %}
            <i class="far fa-file"></i>
            {% endif %}
            {{post.get_file_name}}
        </a>
        {% endif %}
    </section>

    <div class="d-flex justify-content-end">
        {% comment %} tags {% endcomment %}
        {% if post.tags.exists %}
            {% for tag in post.tags.iterator %}
            <a class="text-decoration-none" href="{{tag.get_absolute_url}}">
                <span class="badge text-bg-light">#{{tag}}</span>
            </a>
          {% endfor %}
        {% endif %}
    </div>

</article>

<!-- Comments section-->
<section class="my-7" id="comment-area">
    <div class="card bg-light">
        <div class="card-body">
            <!-- Comment form-->
            <form class="mb-4"><textarea class="form-control" rows="3"
                    placeholder="Join the discussion and leave a comment!"></textarea></form>
            <!-- Comment with nested comments-->
            <div class="d-flex mb-4">
                <!-- Parent comment-->
                <div class="flex-shrink-0"><img class="rounded-circle"
                        src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                <div class="ms-3">
                    <div class="fw-bold">Commenter Name</div>
                    If you're going to lead a space frontier, it has to be government; it'll never be
                    private enterprise. Because the space frontier is dangerous, and it's expensive, and
                    it has unquantified risks.
                    <!-- Child comment 1-->
                    <div class="d-flex mt-4">
                        <div class="flex-shrink-0"><img class="rounded-circle"
                                src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                        <div class="ms-3">
                            <div class="fw-bold">Commenter Name</div>
                            And under those conditions, you cannot establish a capital-market evaluation
                            of that enterprise. You can't get investors.
                        </div>
                    </div>
                    <!-- Child comment 2-->
                    <div class="d-flex mt-4">
                        <div class="flex-shrink-0"><img class="rounded-circle"
                                src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                        <div class="ms-3">
                            <div class="fw-bold">Commenter Name</div>
                            When you put money directly to a problem, it makes a good headline.
                        </div>
                    </div>
                </div>
            </div>
            <!-- Single comment-->
            <div class="d-flex">
                <div class="flex-shrink-0"><img class="rounded-circle"
                        src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                <div class="ms-3">
                    <div class="fw-bold">Commenter Name</div>
                    When I look at the universe and all the ways the universe wants to kill us, I find
                    it hard to reconcile that with statements of beneficence.
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}